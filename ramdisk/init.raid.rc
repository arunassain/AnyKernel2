on late-fs
    # boot time fs tune
    write /sys/block/mmcblk0/queue/iostats 0
    write /sys/block/mmcblk0/queue/read_ahead_kb 2048
    write /sys/block/mmcblk0/queue/nr_requests 256

on boot
    # update cpusets now that processors are up
    write /dev/cpuset/top-app/cpus 0-7
    write /dev/cpuset/foreground/cpus 0-7
    write /dev/cpuset/foreground/boost/cpus 0-7
    write /dev/cpuset/background/cpus 0-7
    write /dev/cpuset/system-background/cpus 0-7

on property:sys.boot_completed=1

    # according to Qcom this legacy value improves first launch latencies
    # stock value is 512k
    setprop dalvik.vm.heapminfree 2m

    #deep sleep
    setprop pm.sleep_mode 1

    # Disable Laptop Mode
        write /proc/sys/vm/laptop_mode 0

    # Add kernel name
        setprop persist.spectrum.kernel Raiden

    # cpuset settings
    write /dev/cpuset/top-app/cpus 0-7
    write /dev/cpuset/foreground/boost/cpus 0-3,6-7
    write /dev/cpuset/foreground/cpus 0-3,6-7
    write /dev/cpuset/background/cpus 0-1
    write /dev/cpuset/camera-daemon/cpus 0-7
    write /dev/cpuset/system-background/cpus 0-3
    write /dev/cpuset/restricted/cpus 0-3

    #Configure LPM, setup power retention
     write /sys/module/lpm_levels/system/pwr/cpu0/ret/idle_enabled N
     write /sys/module/lpm_levels/system/pwr/cpu1/ret/idle_enabled N
     write /sys/module/lpm_levels/system/pwr/cpu2/ret/idle_enabled N
     write /sys/module/lpm_levels/system/pwr/cpu3/ret/idle_enabled N
     write /sys/module/lpm_levels/system/perf/cpu4/ret/idle_enabled N
     write /sys/module/lpm_levels/system/perf/cpu5/ret/idle_enabled N
     write /sys/module/lpm_levels/system/perf/cpu6/ret/idle_enabled N
     write /sys/module/lpm_levels/system/perf/cpu7/ret/idle_enabled N
     write /sys/module/lpm_levels/system/pwr/pwr-l2-dynret/idle_enabled N
     write /sys/module/lpm_levels/system/pwr/pwr-l2-ret/idle_enabled N
     write /sys/module/lpm_levels/system/perf/perf-l2-dynret/idle_enabled N
     write /sys/module/lpm_levels/system/perf/perf-l2-ret/idle_enabled N

    #HMP Task-Packing and Scheduler settings
     write /proc/sys/kernel/sched_upmigrate 96
     write /proc/sys/kernel/sched_upmigrate_min_nice 9
     write /proc/sys/kernel/sched_downmigrate 90
     write /proc/sys/kernel/sched_group_upmigrate 140
     write /proc/sys/kernel/sched_group_downmigrate 120
     write /proc/sys/kernel/sched_small_task 65
     write /proc/sys/kernel/sched_mostly_idle_load 20
     write /proc/sys/kernel/sched_select_prev_cpu_us 0
     write /proc/sys/kernel/sched_freq_inc_notify 400000
     write /proc/sys/kernel/sched_freq_dec_notify 400000
     write /proc/sys/kernel/sched_spill_nr_run 5
     write /proc/sys/kernel/sched_restrict_cluster_spill 1
     write /proc/sys/kernel/sched_short_burst_ns 100000
     write /proc/sys/kernel/sched_prefer_sync_wakee_to_waker 1
     write /proc/sys/kernel/sched_small_wakee_task_load 20

    # end boot time fs tune
    write /sys/block/mmcblk0/queue/scheduler cfq
    write /sys/block/mmcblk0/queue/iostats 0
    write /sys/block/mmcblk0/queue/read_ahead_kb 128
    write /sys/block/mmcblk0/queue/nr_requests 128

    write /sys/block/mmcblk0rpmb/queue/scheduler cfq
    write /sys/block/mmcblk0rpmb/queue/iostats 0
    write /sys/block/mmcblk0rpmb/queue/read_ahead_kb 128
    write /sys/block/mmcblk0rpmb/queue/nr_requests 128

    # Setup swap
    write /proc/sys/vm/page-cluster 0
    write /proc/sys/vm/swappiness 100
    write /sys/module/zswap/parameters/compressor lz4
    write /sys/module/zswap/parameters/zpool z3fold
    write /sys/module/zswap/parameters/max_pool_percent 35
    write /sys/module/zswap/parameters/enabled 1

    # Setup dirty ratios
    write /proc/sys/vm/dirty_ratio 5
    write /proc/sys/vm/dirty_background_ratio 1

    # Lower vfs_cache_pressure
    write /proc/sys/vm/vfs_cache_pressure 60
